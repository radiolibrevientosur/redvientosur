import{t as p,r as l,s,j as e,L as g}from"./index-BrRfBUNT.js";import b from"./NotFoundPage-CkUo5VTs.js";const j=()=>{const{id:o}=p(),[a,n]=l.useState(null),[u,i]=l.useState(!0);return l.useEffect(()=>{o&&(async()=>{i(!0);const{data:t,error:d}=await s.from("publicaciones").select("id, titulo, excerpt, imagen_portada, categoria, publicado_en, autor_id").eq("id",o).eq("tipo","blog").single();if(!t||d){n(null),i(!1);return}let r={nombre_completo:"Autor",avatar_url:"/default-avatar.png",id:"",nombre_usuario:""};if(t.autor_id){const{data:c}=await s.from("usuarios").select("id, nombre_completo, avatar_url, nombre_usuario").eq("id",t.autor_id).single();c&&(r=c)}const{count:m}=await s.from("comentarios_blog").select("*",{count:"exact",head:!0}).eq("publicacion_id",t.id),{count:x}=await s.from("reacciones_blog").select("*",{count:"exact",head:!0}).eq("publicacion_id",t.id).eq("tipo","like");n({id:t.id,title:t.titulo,excerpt:t.excerpt,coverImage:t.imagen_portada,authorId:r.id,authorUsername:r.nombre_usuario,authorName:r.nombre_completo,authorAvatar:r.avatar_url,published:t.publicado_en,category:t.categoria||"General",commentsCount:m||0,likesCount:x||0}),i(!1)})()},[o]),u?e.jsx("div",{className:"py-8 flex justify-center",children:e.jsx(g,{message:"Cargando art√≠culo..."})}):a?e.jsx("div",{className:"max-w-2xl mx-auto p-4",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("img",{src:a.coverImage,alt:a.title,className:"w-full h-64 object-cover rounded-lg mb-4"}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{className:"bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 px-2 py-0.5 rounded-full",children:a.category}),e.jsx("span",{className:"mx-2",children:"‚Ä¢"}),e.jsx("span",{children:new Date(a.published).toLocaleDateString("es-ES")})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:a.title}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:a.excerpt}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("img",{src:a.authorAvatar,alt:a.authorName,className:"w-8 h-8 rounded-full border border-gray-300 dark:border-gray-700"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:a.authorName})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("span",{children:["‚ù§Ô∏è ",a.likesCount]}),e.jsxs("span",{children:["üí¨ ",a.commentsCount]})]})]})}):e.jsx(b,{})};export{j as default};
