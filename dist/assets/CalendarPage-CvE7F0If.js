import{c as y,r as h,j as e,L as O}from"./index-C9n17DBE.js";import{s as v,u,a as L,f as g,b as F}from"./eventStore-gD_OLe0p.js";import{t as x,k as N,i as T,j as I,e as H}from"./en-US-EYaBdrUG.js";import{C as b}from"./calendar-tgGg7R_o.js";import{C as _}from"./chevron-left-Cx7l2oFP.js";import{C as $}from"./chevron-right-DuzZAIh7.js";import{C as R}from"./cake-zZLtQSkn.js";import{C as Y}from"./CreateEventForm-Dzw4K9gZ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=y("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=y("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);function w(t,r){const s=x(t);if(isNaN(r))return N(t,NaN);if(!r)return s;const a=s.getDate(),n=N(t,s.getTime());n.setMonth(s.getMonth()+r+1,0);const c=n.getDate();return a>=c?n:(s.setFullYear(n.getFullYear(),n.getMonth(),a),s)}function f(t,r){const s=v(t),a=v(r);return+s==+a}function z(t,r){const s=x(t.start),a=x(t.end);let n=+s>+a;const c=n?+s:+a,o=n?a:s;o.setHours(0,0,0,0);let d=1;const l=[];for(;+o<=c;)l.push(x(o)),o.setDate(o.getDate()+d),o.setHours(0,0,0,0);return n?l.reverse():l}function B(t){const r=x(t);return r.setDate(1),r.setHours(0,0,0,0),r}function V(t,r){var d,l;const s=T(),a=s.weekStartsOn??((l=(d=s.locale)==null?void 0:d.options)==null?void 0:l.weekStartsOn)??0,n=x(t),c=n.getDay(),o=(c<a?-7:0)+6-(c-a);return n.setDate(n.getDate()+o),n.setHours(23,59,59,999),n}function A(t,r){const s=x(t),a=x(r);return s.getFullYear()===a.getFullYear()&&s.getMonth()===a.getMonth()}function Z(t){return f(t,I(t))}function G(t,r){return w(t,-r)}const J=(t,r)=>t.filter(s=>{const a=new Date(s.date);return f(a,r)}),K=t=>{switch(t){case"event":return"bg-primary-500";case"task":return"bg-yellow-500";case"birthday":return"bg-pink-500";default:return"bg-gray-500"}},Q=({onSelectDate:t,selectedDate:r})=>{const[s,a]=h.useState(new Date),{events:n}=u(),c=B(s),o=H(c),d=L(c),l=V(o),C=z({start:d,end:l}),D=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],M=()=>{a(i=>G(i,1))},S=()=>{a(i=>w(i,1))};return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-5 w-5 text-primary-600 dark:text-primary-400 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g(s,"MMMM yyyy")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:M,className:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx(_,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),e.jsx("button",{onClick:S,className:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx($,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 mb-1 text-center",children:D.map(i=>e.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 py-1",children:i},i))}),e.jsx("div",{className:"grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700 rounded overflow-hidden",children:C.map(i=>{const m=J(n,i),E=A(i,s),p=f(i,r),j=Z(i);return e.jsxs("button",{onClick:()=>t(i),className:`
                h-16 sm:h-20 p-1 flex flex-col relative 
                ${E?"bg-white dark:bg-gray-900":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600"}
                ${p?"ring-2 ring-primary-500 z-10":""}
                ${j&&!p?"ring-1 ring-primary-300 dark:ring-primary-700":""}
              `,children:[e.jsx("span",{className:`
                  text-xs leading-none w-5 h-5 flex items-center justify-center rounded-full 
                  ${j?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300 font-medium":""}
                `,children:g(i,"d")}),m.length>0&&e.jsxs("div",{className:"mt-auto",children:[m.slice(0,3).map((k,se)=>e.jsx("div",{className:`h-1.5 rounded-full my-0.5 ${K(k.type)}`},k.id)),m.length>3&&e.jsxs("span",{className:"text-xs text-right block text-gray-500 dark:text-gray-400",children:["+",m.length-3]})]})]},i.toString())})})]})},U=t=>{switch(t){case"event":return e.jsx(b,{className:"h-4 w-4 text-primary-500"});case"task":return e.jsx(q,{className:"h-4 w-4 text-yellow-500"});case"birthday":return e.jsx(R,{className:"h-4 w-4 text-pink-500"})}},X=t=>{switch(t){case"event":return"Event";case"task":return"Task";case"birthday":return"Birthday"}},ee=({date:t,onCreateEvent:r})=>{const{events:s,getEventsByDate:a}=u(),n=a(t);return e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g(t,"EEEE, MMMM d")}),e.jsx("button",{onClick:r,className:"btn btn-primary px-3 py-1 text-xs rounded-full",children:"+ Add"})]}),n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No events for this day"}),e.jsx("button",{onClick:r,className:"mt-3 btn btn-ghost text-primary-600 dark:text-primary-400",children:"Create an event"})]}):e.jsx("div",{className:"space-y-3",children:n.map(c=>e.jsx(te,{event:c},c.id))})]})},te=({event:t})=>e.jsx("div",{className:"card hover:bg-gray-50 dark:hover:bg-gray-800/60 transition-colors",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:U(t.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("span",{className:"inline-block text-xs px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 mt-1",children:X(t.type)})]})}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:t.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-y-1 gap-x-3",children:[t.time&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:F(t.time)})]}),t.location&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:t.location})]})]})]})]})}),xe=()=>{const[t,r]=h.useState(new Date),[s,a]=h.useState(!1),{isLoading:n,fetchEvents:c}=u();h.useEffect(()=>{c()},[c]);const o=()=>{a(!0)},d=()=>{a(!1)},l=()=>{a(!1)};return n?e.jsx("div",{className:"py-8 flex justify-center",children:e.jsx(O,{message:"Loading calendar..."})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(Q,{selectedDate:t,onSelectDate:r}),s?e.jsx(Y,{date:t,onSuccess:d,onCancel:l}):e.jsx(ee,{date:t,onCreateEvent:o})]})};export{xe as default};
