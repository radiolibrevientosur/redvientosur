import{c as _,r as t,j as e,s as B,a as T,R as Y,b as ee,d as Q,I as te}from"./index-COvD-dsj.js";import{u as ae}from"./postStore-Dp1p3vYt.js";import{$ as re,d as se}from"./native-uLmOTjr_.js";import{S as ne}from"./send-C9DKiU_-.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=_("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=_("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=_("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=_("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),ce=({onFileSelect:d,onCancel:N,folder:A="media"})=>{const[s,v]=t.useState(null),[h,r]=t.useState(null),[R,n]=t.useState(0),[w,i]=t.useState(!1),j=t.useRef(null),o=async b=>{var c;const g=((c=b.target.files)==null?void 0:c[0])||null;if(v(g),g){g.type.startsWith("image/")?r(URL.createObjectURL(g)):r(null),i(!0),n(0);try{const x=g.name.split(".").pop(),k=`${A}/${Date.now()}_${Math.random().toString(36).substring(2,8)}.${x}`;for(let l=1;l<=90;l+=10)await new Promise(S=>setTimeout(S,60)),n(l);const{error:p}=await B.storage.from("media").upload(k,g);if(n(100),i(!1),p)throw p;const{data:I}=B.storage.from("media").getPublicUrl(k);d(I.publicUrl),T.success("Archivo subido correctamente")}catch{i(!1),n(0),d(null),T.error("Error al subir archivo")}}else r(null),i(!1),n(0),d(null)},m=()=>{v(null),r(null),n(0),i(!1),d(null),N&&N(),j.current&&(j.current.value="")};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{ref:j,type:"file",onChange:o,disabled:w,className:"block",style:{display:"none"}}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{type:"button",className:"p-2 rounded-full bg-gray-100 hover:bg-primary-100 text-gray-600 hover:text-primary-600 focus:outline-none focus:ring-2 focus:ring-primary-400",onClick:()=>{var b;return(b=j.current)==null?void 0:b.click()},disabled:w,"aria-label":"Seleccionar archivo",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.586-6.586a4 4 0 10-5.656-5.656l-6.586 6.586a6 6 0 108.485 8.485l6.586-6.586"})})}),s&&e.jsx("button",{type:"button",onClick:m,className:"btn btn-secondary btn-sm",children:"Cancelar"})]}),h&&e.jsx("img",{src:h,alt:"preview",className:"max-h-40 rounded"}),s&&!h&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Archivo seleccionado: ",s.name]}),w&&e.jsx("div",{className:"w-full bg-gray-200 rounded h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded",style:{width:`${R}%`}})})]})},de=t.forwardRef(({onAudioReady:d,folder:N="media"},A)=>{const[s,v]=t.useState(!1),[h,r]=t.useState(null),[R,n]=t.useState(0),[w,i]=t.useState(!1),[j,o]=t.useState(0),[m,b]=t.useState(!1),[g,c]=t.useState(null),[x,k]=t.useState(!1),[p,I]=t.useState(!1),l=t.useRef(null),S=t.useRef([]),C=t.useRef(null),z=async()=>{r(null),n(0),o(0),i(!1),c(null),window.navigator.vibrate&&window.navigator.vibrate([50,30,50]);const u=await navigator.mediaDevices.getUserMedia({audio:!0}),y=new window.MediaRecorder(u);l.current=y,S.current=[],y.ondataavailable=$=>{S.current.push($.data)},y.onstop=async()=>{const $=new Blob(S.current,{type:"audio/webm"});c($),r(URL.createObjectURL($)),b(!0)},y.start(),v(!0),C.current=setInterval(()=>n($=>$+1),1e3)},F=()=>{l.current&&s&&(v(!1),C.current&&clearInterval(C.current),l.current.stop())},f=async()=>{if(b(!1),!!g){i(!0),o(0);try{const u=`${N}/audio_${Date.now()}_${Math.random().toString(36).substring(2,8)}.webm`;for(let H=1;H<=90;H+=10)await new Promise(O=>setTimeout(O,60)),o(H);const{error:y}=await B.storage.from("media").upload(u,g);if(o(100),i(!1),y)throw y;const{data:$}=B.storage.from("media").getPublicUrl(u);r(null),c(null),d($.publicUrl),b(!1)}catch{i(!1),o(0),r(null),c(null),d(null),b(!1),T.error("Error al subir audio")}}},M=()=>{b(!1),r(null),c(null),n(0),o(0),i(!1),d(null),C.current&&clearInterval(C.current)},P=()=>{v(!1),r(null),n(0),o(0),i(!1),d(null),C.current&&clearInterval(C.current),l.current&&l.current.state!=="inactive"&&l.current.stop()},D=()=>{l.current&&s&&!p&&(l.current.pause(),I(!0))},E=()=>{l.current&&s&&p&&(l.current.resume(),I(!1))},U=t.useRef(null);return Y.useEffect(()=>{if(!m)return;function u(y){U.current&&!U.current.contains(y.target)&&(b(!1),r(null),c(null))}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[m]),t.useImperativeHandle(A,()=>({startRecording:z,stopRecording:F,cancelRecording:P,isRecording:()=>s,isUploading:()=>w})),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[s&&!m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:F,className:"btn btn-danger btn-sm animate-pulse",children:"Detener"}),e.jsx("button",{type:"button",onClick:D,disabled:p,className:"btn btn-warning btn-xs ml-2",children:"Pausar"}),e.jsx("button",{type:"button",onClick:E,disabled:!p,className:"btn btn-success btn-xs ml-2",children:"Reanudar"})]}),s&&!m&&e.jsxs("span",{className:"text-red-500 font-mono animate-pulse",children:[R,"s"]}),(h||s||w)&&!m&&e.jsx("button",{type:"button",onClick:P,className:"btn btn-secondary btn-sm",children:"Cancelar"})]}),m&&e.jsxs("div",{ref:U,className:"flex flex-col items-center gap-3 animate-fade-in bg-white dark:bg-gray-900 rounded-xl shadow-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400 animate-bounce",children:"¡Revisa tu nota de voz!"}),e.jsx("span",{className:"text-base text-gray-700 dark:text-gray-200",children:"¿Quieres enviarla o descartarla?"})]}),e.jsx("audio",{src:h||void 0,controls:!0,className:"w-full my-2 rounded-lg shadow"}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("button",{type:"button",onClick:f,className:"btn btn-success btn-lg flex items-center gap-2 animate-bounce",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Enviar"]}),e.jsxs("button",{type:"button",onClick:M,className:"btn btn-danger btn-lg flex items-center gap-2 animate-shake",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Descartar"]})]}),e.jsx("button",{type:"button",onClick:z,className:"btn btn-primary btn-xs mt-2 animate-fade-in",children:"Regrabar"})]}),w&&e.jsx("div",{className:"w-full bg-gray-200 rounded h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded",style:{width:`${j}%`}})}),h&&!s&&!w&&!m&&e.jsxs("div",{className:`space-y-1 relative group ${x?"ring-2 ring-red-500 bg-red-50":""}`,draggable:!0,onDragStart:u=>{u.dataTransfer.effectAllowed="move"},onDragOver:u=>{u.preventDefault(),k(!0)},onDragLeave:()=>k(!1),onDrop:()=>{k(!1),r(null),c(null),d(null),T("Nota de voz eliminada")},children:[e.jsx("audio",{src:h,controls:!0,className:"w-full"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:z,className:"btn btn-primary btn-xs",children:"Regrabar"}),e.jsx("span",{className:"text-xs text-gray-500 group-hover:text-red-600 transition",children:"Arrastra a la izquierda para eliminar"})]}),x&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("span",{className:"text-red-600 font-bold text-lg animate-bounce",children:"Soltar para eliminar"})})]})]})}),ue=t.forwardRef(({onVideoReady:d,folder:N="media"},A)=>{const[s,v]=t.useState(!1),[h,r]=t.useState(!1),[R,n]=t.useState(0),[w,i]=t.useState(0),[j,o]=t.useState(null),[m,b]=t.useState(!1),[g,c]=t.useState(null),x=t.useRef(null),k=t.useRef([]),p=t.useRef(null),I=t.useRef(null),l=t.useRef(null),S=async()=>{o(null),i(0),n(0),r(!1);const M=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});l.current=M,I.current&&(I.current.srcObject=M,I.current.play());const P=new window.MediaRecorder(M);x.current=P,k.current=[],P.ondataavailable=D=>{k.current.push(D.data)},P.onstop=async()=>{const D=new Blob(k.current,{type:"video/webm"});r(!0),n(0);try{const E=`${N}/video_${Date.now()}_${Math.random().toString(36).substring(2,8)}.webm`;for(let y=1;y<=90;y+=10)await new Promise($=>setTimeout($,60)),n(y);const{error:U}=await B.storage.from("media").upload(E,D);if(n(100),r(!1),U)throw U;const{data:u}=B.storage.from("media").getPublicUrl(E);o(null),d(u.publicUrl),T.success("Video subido correctamente")}catch{r(!1),n(0),o(null),d(null),T.error("Error al subir video")}l.current&&l.current.getTracks().forEach(E=>E.stop())},P.start(),v(!0),p.current=setInterval(()=>i(D=>D+1),1e3)},C=()=>{x.current&&s&&(v(!1),p.current&&clearInterval(p.current),x.current.onstop=()=>{const M=new Blob(k.current,{type:"video/webm"});c(URL.createObjectURL(M)),b(!0),l.current&&l.current.getTracks().forEach(P=>P.stop())},x.current.stop())},z=async()=>{if(b(!1),!!g){r(!0),n(0);try{const M=await fetch(g).then(U=>U.blob()),P=`${N}/video_${Date.now()}_${Math.random().toString(36).substring(2,8)}.webm`;for(let U=1;U<=90;U+=10)await new Promise(u=>setTimeout(u,60)),n(U);const{error:D}=await B.storage.from("media").upload(P,M);if(n(100),r(!1),D)throw D;const{data:E}=B.storage.from("media").getPublicUrl(P);o(null),c(null),d(E.publicUrl),T.success("Video subido correctamente")}catch{r(!1),n(0),o(null),c(null),d(null),T.error("Error al subir video")}}},F=()=>{b(!1),o(null),c(null),i(0),n(0),r(!1),d(null),p.current&&clearInterval(p.current)},f=()=>{v(!1),o(null),c(null),i(0),n(0),r(!1),d(null),p.current&&clearInterval(p.current),x.current&&x.current.state!=="inactive"&&x.current.stop(),l.current&&l.current.getTracks().forEach(M=>M.stop())};return t.useImperativeHandle(A,()=>({startRecording:S,stopRecording:C,cancelRecording:f,isRecording:()=>s,isUploading:()=>h})),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[!s&&!h&&!m&&e.jsx("button",{type:"button",onClick:S,className:"btn btn-primary btn-sm",children:"Grabar video"}),s&&!m&&e.jsx("button",{type:"button",onClick:C,className:"btn btn-danger btn-sm animate-pulse",children:"Detener"}),s&&!m&&e.jsxs("span",{className:"text-red-500 font-mono animate-pulse",children:[w,"s"]}),(j||s||h)&&!m&&e.jsx("button",{type:"button",onClick:f,className:"btn btn-secondary btn-sm",children:"Cancelar"})]}),m&&g&&e.jsxs("div",{className:"flex flex-col items-center gap-3 animate-fade-in bg-white dark:bg-gray-900 rounded-xl shadow-lg p-4 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400 animate-bounce",children:"¡Revisa tu video!"}),e.jsx("span",{className:"text-base text-gray-700 dark:text-gray-200",children:"¿Quieres enviarlo o descartarlo?"})]}),e.jsx("video",{src:g,controls:!0,className:"w-full my-2 rounded-lg shadow",style:{maxHeight:240}}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("button",{type:"button",onClick:z,className:"btn btn-success btn-lg flex items-center gap-2 animate-bounce",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Enviar"]}),e.jsxs("button",{type:"button",onClick:F,className:"btn btn-danger btn-lg flex items-center gap-2 animate-shake",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Descartar"]})]}),e.jsx("button",{type:"button",onClick:S,className:"btn btn-primary btn-xs mt-2 animate-fade-in",children:"Regrabar"})]}),j&&!s&&!h&&!m&&e.jsxs("div",{className:"space-y-1 relative group",children:[e.jsx("video",{src:j,controls:!0,className:"w-full rounded-lg",style:{maxHeight:240}}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("button",{type:"button",onClick:()=>{o(null),c&&c(null),d(null),T("Nota de video eliminada")},className:"btn btn-danger btn-xs flex items-center gap-1 animate-shake",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Descartar"]}),e.jsx("button",{type:"button",onClick:S,className:"btn btn-primary btn-xs",children:"Regrabar"})]})]}),e.jsx("video",{ref:I,className:"w-full rounded-lg",autoPlay:!0,muted:!0,playsInline:!0,style:{display:s?"block":"none",maxHeight:240}}),h&&e.jsx("div",{className:"w-full bg-gray-200 rounded h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded",style:{width:`${R}%`}})})]})}),he=({onSuccess:d})=>{const[N,A]=t.useState(""),[s,v]=t.useState(""),[h,r]=t.useState("text"),[R,n]=t.useState(!1),w=t.useRef(null),i=t.useRef(null),[j,o]=t.useState(!1),[m,b]=t.useState(!1),[g,c]=t.useState(!1),[x,k]=t.useState(!1),[p,I]=t.useState(!1),[l,S]=t.useState(!1),[C,z]=t.useState(null),F=t.useRef(null),{user:f}=ee(),{addPost:M}=ae(),P=async a=>{if(a.preventDefault(),!f){T.error("Debes iniciar sesión para crear una publicación");return}if(!N.trim()&&!s){T.error("Por favor, agrega contenido o un archivo");return}n(!0);try{await M({userId:f.id,type:h,content:N.trim(),mediaUrl:s||void 0,isFavorite:!1}),A(""),v(""),r("text"),T.success("¡Publicación creada exitosamente!"),d&&d()}catch(L){T.error("Error al crear la publicación"),console.error("Failed to create post:",L)}finally{n(!1)}},D=a=>{v(a||""),a?a.match(/\.(jpg|jpeg|png|gif)$/i)?r("image"):a.match(/\.(mp4|webm|mov)$/i)?r("video"):a.match(/\.(mp3|wav|ogg)$/i)?r("audio"):r("document"):r("text")},E=a=>{v(a||""),r(a?"audio":"text"),c(!1),o(!1)},U=a=>{v(a||""),r(a?"video":"text"),k(!1)},u=()=>{c(!0),b(!1),k(!1),o(!0),window.navigator.vibrate&&window.navigator.vibrate([50,30,50]),setTimeout(()=>{var a;(a=w.current)==null||a.startRecording()},50)},y=()=>{var a;j&&((a=w.current)==null||a.stopRecording(),o(!1))},$=()=>{var a;j&&((a=w.current)==null||a.cancelRecording(),o(!1))},H=()=>{k(!0),b(!1),c(!1),setTimeout(()=>{var a;(a=i.current)==null||a.startRecording()},50)},O=()=>{var a;(a=i.current)==null||a.stopRecording()},V=()=>{var a;(a=i.current)==null||a.cancelRecording()},J=a=>{var L,W;A(N+(a.native||((W=(L=a.skins)==null?void 0:L[0])==null?void 0:W.native)||"")),I(!1)},K=()=>{S(!0),z(null)},q=a=>{z(a),setTimeout(()=>{var L;return(L=F.current)==null?void 0:L.click()},200)},X=a=>{var G;const L=(G=a.target.files)==null?void 0:G[0];if(!L)return;const W=URL.createObjectURL(L);D(W),S(!1),z(null)};return e.jsx("div",{className:"feed-item mb-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-800 shadow-sm",children:e.jsxs("form",{onSubmit:P,children:[e.jsx("div",{className:"p-4 pb-2",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:f==null?void 0:f.avatar,alt:f==null?void 0:f.displayName,className:"avatar-img"})}),e.jsx("textarea",{placeholder:`Hola ${(f==null?void 0:f.displayName)||""} ¿Qué está pasando?`,value:N,onChange:a=>A(a.target.value),className:"flex-1 p-4 text-lg text-gray-900 dark:text-white bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-2xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500 shadow-sm resize-none min-h-[48px] max-h-[160px] transition-all placeholder-gray-400 dark:placeholder-gray-500",rows:2,"aria-label":"Contenido de la publicación",required:!s,disabled:R,style:{height:"auto",boxShadow:"0 2px 8px 0 rgba(0,0,0,0.04)"},onInput:a=>{const L=a.target;L.style.height="auto",L.style.height=L.scrollHeight+"px"}})]})}),e.jsxs("div",{className:"px-4 py-2 flex items-end border-t border-gray-100 dark:border-gray-800 bg-white dark:bg-gray-900 rounded-b-2xl",children:[e.jsx("button",{type:"button",className:"p-2 rounded-full text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 mr-1",onClick:()=>I(a=>!a),"aria-label":"Insertar emoji",disabled:R,children:e.jsx("span",{role:"img","aria-label":"emoji",children:"😊"})}),e.jsx("button",{type:"button",className:"p-2 rounded-full text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 mr-1",onClick:K,"aria-label":"Adjuntar archivo",disabled:R,children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1"}),N.trim()||s?e.jsx("button",{type:"submit",disabled:R||!N.trim()&&!s,className:"btn btn-primary p-2 rounded-full flex items-center justify-center ml-1","aria-busy":R,children:R?e.jsx("span",{className:"loader h-5 w-5"}):e.jsx(ne,{className:"h-5 w-5"})}):e.jsxs("button",{type:"button",className:`relative p-2 rounded-full text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 ml-1 transition-all duration-200
                ${g?"bg-red-200 text-red-600 ring-4 ring-red-400/30 animate-pulse":""}`,onMouseDown:u,onMouseUp:y,onMouseLeave:$,onTouchStart:u,onTouchEnd:y,onTouchCancel:$,"aria-label":"Grabar nota de voz",disabled:R,children:[j&&e.jsx("span",{className:"absolute inset-0 rounded-full border-2 border-red-400 animate-ping"}),e.jsx(Z,{className:"h-5 w-5 relative z-10"})]}),e.jsx("button",{type:"button",className:`p-2 rounded-full text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-800 ml-1 ${x?"bg-blue-200 text-blue-600":""}`,onMouseDown:H,onMouseUp:O,onMouseLeave:V,onTouchStart:H,onTouchEnd:O,onTouchCancel:V,"aria-label":"Grabar nota de video",disabled:R,children:e.jsx(Q,{className:"h-5 w-5"})})]}),m&&e.jsx("div",{className:"px-4 pb-2",children:e.jsx(ce,{onFileSelect:D})}),g&&e.jsxs("div",{className:"px-4 pb-2",children:[e.jsx(de,{ref:w,onAudioReady:E}),j&&e.jsxs("div",{className:"text-red-600 font-bold mt-2 flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4 animate-pulse"})," Grabando... Suelta para enviar, desliza fuera para cancelar"]})]}),x&&e.jsxs("div",{className:"px-4 pb-2",children:[e.jsx(ue,{ref:i,onVideoReady:U}),e.jsxs("div",{className:"text-blue-600 font-bold mt-2 flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 animate-pulse"})," Grabando video... Suelta para enviar, desliza fuera para cancelar"]})]}),p&&e.jsx("div",{className:"fixed left-12 bottom-8 z-50 animate-slide-down shadow-2xl rounded-2xl bg-white dark:bg-gray-900 border border-primary-200 dark:border-primary-700",children:e.jsx(re,{data:se,onEmojiSelect:J,theme:"auto"})}),l&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-lg p-6 w-full max-w-xs flex flex-col items-center gap-4 relative",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-700 text-2xl",onClick:()=>S(!1),children:"×"}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"¿Qué quieres adjuntar?"}),e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 justify-center rounded-full py-2 text-base font-semibold bg-white dark:bg-gray-800 border border-primary-200 dark:border-gray-700 shadow-sm hover:bg-primary-50 dark:hover:bg-gray-700 transition-colors text-primary-700 dark:text-primary-200",onClick:()=>q("media"),children:[e.jsx(te,{className:"h-5 w-5"})," Foto/Video"]}),e.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 justify-center rounded-full py-2 text-base font-semibold bg-white dark:bg-gray-800 border border-primary-200 dark:border-gray-700 shadow-sm hover:bg-primary-50 dark:hover:bg-gray-700 transition-colors text-primary-700 dark:text-primary-200",onClick:()=>q("music"),children:[e.jsx(oe,{className:"h-5 w-5"})," Música"]}),e.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 justify-center rounded-full py-2 text-base font-semibold bg-white dark:bg-gray-800 border border-primary-200 dark:border-gray-700 shadow-sm hover:bg-primary-50 dark:hover:bg-gray-700 transition-colors text-primary-700 dark:text-primary-200",onClick:()=>q("document"),children:[e.jsx(le,{className:"h-5 w-5"})," Documento"]})]}),e.jsx("input",{ref:F,type:"file",accept:C==="media"?"image/*,video/*":C==="music"?"audio/*":C==="document"?".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.rar,.csv":"*/*",style:{display:"none"},onChange:X})]})})]})})};export{he as C,le as F};
