import{c as g,r as n,u as k,j as e}from"./index-DHBn2u_N.js";import{u as b,g as o,f as h}from"./postStore-D3iSVtj3.js";import{H as w}from"./heart-m85UnwVV.js";import{M as C}from"./message-circle-eUHy5JqK.js";import{S}from"./share-2-CIZLWYva.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=g("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=g("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),L=({post:a})=>{const[l,d]=n.useState(!1),[c,m]=n.useState(""),{user:t}=k(),{toggleLike:y,addComment:u,toggleFavorite:p}=b(),r=o(a.userId),x=t?a.likes.includes(t.id):!1,j=()=>{t&&y(a.id,t.id)},N=i=>{i.preventDefault(),t&&c.trim()&&(u(a.id,t.id,c),m(""))},f=()=>{p(a.id)},v=()=>{alert("Sharing functionality would be implemented here")};return e.jsxs("article",{className:"feed-item",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("img",{src:r==null?void 0:r.avatar,alt:r==null?void 0:r.displayName,className:"avatar-img"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r==null?void 0:r.displayName}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:h(a.createdAt)})]})]}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:e.jsx(I,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})})]}),e.jsx("div",{className:"px-4 pb-3",children:e.jsx("p",{className:"mb-3 text-gray-900 dark:text-white",children:a.content})}),a.mediaUrl&&e.jsx("div",{className:"relative pb-3",children:e.jsx("img",{src:a.mediaUrl,alt:"Post media",className:"w-full object-cover max-h-[500px]"})}),e.jsxs("div",{className:"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("button",{onClick:j,className:"flex items-center space-x-1 group",children:[e.jsx(w,{className:`h-5 w-5 ${x?"text-red-500 fill-red-500":"text-gray-600 dark:text-gray-400 group-hover:text-red-500"}`}),e.jsx("span",{className:`text-sm ${x?"text-red-500":"text-gray-600 dark:text-gray-400 group-hover:text-red-500"}`,children:a.likes.length})]}),e.jsxs("button",{onClick:()=>d(!l),className:"flex items-center space-x-1 group",children:[e.jsx(C,{className:"h-5 w-5 text-gray-600 dark:text-gray-400 group-hover:text-primary-500"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 group-hover:text-primary-500",children:a.comments.length})]}),e.jsx("button",{onClick:v,className:"flex items-center group",children:e.jsx(S,{className:"h-5 w-5 text-gray-600 dark:text-gray-400 group-hover:text-primary-500"})})]}),e.jsx("button",{onClick:f,className:"flex items-center group",children:e.jsx(P,{className:`h-5 w-5 ${a.isFavorite?"text-primary-500 fill-primary-500":"text-gray-600 dark:text-gray-400 group-hover:text-primary-500"}`})})]}),(a.comments.length>0||l)&&e.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800/50 rounded-b-xl",children:[a.comments.length>0&&e.jsxs("div",{className:"mb-3 space-y-3",children:[a.comments.slice(0,l?void 0:2).map(i=>{const s=o(i.userId);return e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"avatar w-8 h-8",children:e.jsx("img",{src:s==null?void 0:s.avatar,alt:s==null?void 0:s.displayName,className:"avatar-img"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-2 rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:s==null?void 0:s.displayName}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:i.content})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h(i.createdAt)})]})]},i.id)}),a.comments.length>2&&!l&&e.jsxs("button",{onClick:()=>d(!0),className:"text-sm text-primary-600 dark:text-primary-400 font-medium",children:["View all ",a.comments.length," comments"]})]}),t&&e.jsxs("form",{onSubmit:N,className:"flex items-center space-x-2",children:[e.jsx("div",{className:"avatar w-8 h-8",children:e.jsx("img",{src:t.avatar,alt:t.displayName,className:"avatar-img"})}),e.jsx("input",{type:"text",placeholder:"Add a comment...",className:"flex-1 bg-white dark:bg-gray-900 rounded-full px-4 py-2 text-sm border border-gray-200 dark:border-gray-700 focus:ring-1 focus:ring-primary-500 focus:border-primary-500",value:c,onChange:i=>m(i.target.value)}),e.jsx("button",{type:"submit",disabled:!c.trim(),className:"text-sm font-medium text-primary-600 dark:text-primary-400 disabled:opacity-50",children:"Post"})]})]})]})};export{P as B,L as P};
