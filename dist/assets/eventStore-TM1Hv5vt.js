var S=Object.defineProperty;var ee=(s,n,e)=>n in s?S(s,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[n]=e;var a=(s,n,e)=>ee(s,typeof n!="symbol"?n+"":n,e);import{d as te,s as M,a as E}from"./index-BSYyVXs5.js";import{g as re,a as q,b as z,c as se,d as ne,l as X,i as oe,w as F,e as ae,f as H}from"./format-6SnhDrvL.js";import{t as P,c as m,g as Z,m as ie,a as ce,b as ue,d as $,e as le}from"./en-US-D3c9jfE3.js";function K(s,n){const e=P(s);return isNaN(n)?m(s,NaN):(n&&e.setDate(e.getDate()+n),e)}function de(){return Object.assign({},Z())}function we(s){let e=P(s).getDay();return e===0&&(e=7),e}function fe(s,n){const e=n instanceof Date?m(n,0):new n(0);return e.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),e.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e}const he=10;class V{constructor(){a(this,"subPriority",0)}validate(n,e){return!0}}class pe extends V{constructor(n,e,r,t,o){super(),this.value=n,this.validateValue=e,this.setValue=r,this.priority=t,o&&(this.subPriority=o)}validate(n,e){return this.validateValue(n,this.value,e)}set(n,e,r){return this.setValue(n,e,this.value,r)}}class ye extends V{constructor(){super(...arguments);a(this,"priority",he);a(this,"subPriority",-1)}set(e,r){return r.timestampIsSet?e:m(e,fe(e,Date))}}class l{run(n,e,r,t){const o=this.parse(n,e,r,t);return o?{setter:new pe(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(n,e,r){return!0}}class me extends l{constructor(){super(...arguments);a(this,"priority",140);a(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,t){switch(r){case"G":case"GG":case"GGG":return t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"});case"GGGGG":return t.era(e,{width:"narrow"});case"GGGG":default:return t.era(e,{width:"wide"})||t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"})}}set(e,r,t){return r.era=t,e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}}const h={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},_={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function p(s,n){return s&&{value:n(s.value),rest:s.rest}}function d(s,n){const e=n.match(s);return e?{value:parseInt(e[0],10),rest:n.slice(e[0].length)}:null}function D(s,n){const e=n.match(s);if(!e)return null;if(e[0]==="Z")return{value:0,rest:n.slice(1)};const r=e[1]==="+"?1:-1,t=e[2]?parseInt(e[2],10):0,o=e[3]?parseInt(e[3],10):0,i=e[5]?parseInt(e[5],10):0;return{value:r*(t*ie+o*ce+i*ue),rest:n.slice(e[0].length)}}function j(s){return d(h.anyDigitsSigned,s)}function f(s,n){switch(s){case 1:return d(h.singleDigit,n);case 2:return d(h.twoDigits,n);case 3:return d(h.threeDigits,n);case 4:return d(h.fourDigits,n);default:return d(new RegExp("^\\d{1,"+s+"}"),n)}}function O(s,n){switch(s){case 1:return d(h.singleDigitSigned,n);case 2:return d(h.twoDigitsSigned,n);case 3:return d(h.threeDigitsSigned,n);case 4:return d(h.fourDigitsSigned,n);default:return d(new RegExp("^-?\\d{1,"+s+"}"),n)}}function v(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function U(s,n){const e=n>0,r=e?n:1-n;let t;if(r<=50)t=s||100;else{const o=r+50,i=Math.trunc(o/100)*100,c=s>=o%100;t=s+i-(c?100:0)}return e?t:1-t}function J(s){return s%400===0||s%4===0&&s%100!==0}class be extends l{constructor(){super(...arguments);a(this,"priority",130);a(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,t){const o=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return p(f(4,e),o);case"yo":return p(t.ordinalNumber(e,{unit:"year"}),o);default:return p(f(r.length,e),o)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,t){const o=e.getFullYear();if(t.isTwoDigitYear){const c=U(t.year,o);return e.setFullYear(c,0,1),e.setHours(0,0,0,0),e}const i=!("era"in r)||r.era===1?t.year:1-t.year;return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}}class xe extends l{constructor(){super(...arguments);a(this,"priority",130);a(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,t){const o=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return p(f(4,e),o);case"Yo":return p(t.ordinalNumber(e,{unit:"year"}),o);default:return p(f(r.length,e),o)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,t,o){const i=re(e,o);if(t.isTwoDigitYear){const y=U(t.year,i);return e.setFullYear(y,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),q(e,o)}const c=!("era"in r)||r.era===1?t.year:1-t.year;return e.setFullYear(c,0,o.firstWeekContainsDate),e.setHours(0,0,0,0),q(e,o)}}class ge extends l{constructor(){super(...arguments);a(this,"priority",130);a(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return O(r==="R"?4:r.length,e)}set(e,r,t){const o=m(e,0);return o.setFullYear(t,0,4),o.setHours(0,0,0,0),z(o)}}class Te extends l{constructor(){super(...arguments);a(this,"priority",130);a(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return O(r==="u"?4:r.length,e)}set(e,r,t){return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}}class _e extends l{constructor(){super(...arguments);a(this,"priority",120);a(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,t){switch(r){case"Q":case"QQ":return f(r.length,e);case"Qo":return t.ordinalNumber(e,{unit:"quarter"});case"QQQ":return t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(e,{width:"wide",context:"formatting"})||t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,t){return e.setMonth((t-1)*3,1),e.setHours(0,0,0,0),e}}class De extends l{constructor(){super(...arguments);a(this,"priority",120);a(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,t){switch(r){case"q":case"qq":return f(r.length,e);case"qo":return t.ordinalNumber(e,{unit:"quarter"});case"qqq":return t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return t.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(e,{width:"wide",context:"standalone"})||t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,t){return e.setMonth((t-1)*3,1),e.setHours(0,0,0,0),e}}class ke extends l{constructor(){super(...arguments);a(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);a(this,"priority",110)}parse(e,r,t){const o=i=>i-1;switch(r){case"M":return p(d(h.month,e),o);case"MM":return p(f(2,e),o);case"Mo":return p(t.ordinalNumber(e,{unit:"month"}),o);case"MMM":return t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return t.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(e,{width:"wide",context:"formatting"})||t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,t){return e.setMonth(t,1),e.setHours(0,0,0,0),e}}class Ee extends l{constructor(){super(...arguments);a(this,"priority",110);a(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,t){const o=i=>i-1;switch(r){case"L":return p(d(h.month,e),o);case"LL":return p(f(2,e),o);case"Lo":return p(t.ordinalNumber(e,{unit:"month"}),o);case"LLL":return t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return t.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(e,{width:"wide",context:"standalone"})||t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,t){return e.setMonth(t,1),e.setHours(0,0,0,0),e}}function Pe(s,n,e){const r=P(s),t=se(r,e)-n;return r.setDate(r.getDate()-t*7),r}class Me extends l{constructor(){super(...arguments);a(this,"priority",100);a(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,t){switch(r){case"w":return d(h.week,e);case"wo":return t.ordinalNumber(e,{unit:"week"});default:return f(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,t,o){return q(Pe(e,t,o),o)}}function Ie(s,n){const e=P(s),r=ne(e)-n;return e.setDate(e.getDate()-r*7),e}class Ye extends l{constructor(){super(...arguments);a(this,"priority",100);a(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,t){switch(r){case"I":return d(h.week,e);case"Io":return t.ordinalNumber(e,{unit:"week"});default:return f(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,t){return z(Ie(e,t))}}const He=[31,28,31,30,31,30,31,31,30,31,30,31],Oe=[31,29,31,30,31,30,31,31,30,31,30,31];class Le extends l{constructor(){super(...arguments);a(this,"priority",90);a(this,"subPriority",1);a(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,t){switch(r){case"d":return d(h.date,e);case"do":return t.ordinalNumber(e,{unit:"date"});default:return f(r.length,e)}}validate(e,r){const t=e.getFullYear(),o=J(t),i=e.getMonth();return o?r>=1&&r<=Oe[i]:r>=1&&r<=He[i]}set(e,r,t){return e.setDate(t),e.setHours(0,0,0,0),e}}class qe extends l{constructor(){super(...arguments);a(this,"priority",90);a(this,"subpriority",1);a(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,t){switch(r){case"D":case"DD":return d(h.dayOfYear,e);case"Do":return t.ordinalNumber(e,{unit:"date"});default:return f(r.length,e)}}validate(e,r){const t=e.getFullYear();return J(t)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,t){return e.setMonth(0,t),e.setHours(0,0,0,0),e}}function N(s,n,e){var g,k,b,Y;const r=Z(),t=(e==null?void 0:e.weekStartsOn)??((k=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:k.weekStartsOn)??r.weekStartsOn??((Y=(b=r.locale)==null?void 0:b.options)==null?void 0:Y.weekStartsOn)??0,o=P(s),i=o.getDay(),y=(n%7+7)%7,x=7-t,I=n<0||n>6?n-(i+x)%7:(y+x)%7-(i+x)%7;return K(o,I)}class ve extends l{constructor(){super(...arguments);a(this,"priority",90);a(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,t){switch(r){case"E":case"EE":case"EEE":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return t.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,t,o){return e=N(e,t,o),e.setHours(0,0,0,0),e}}class Ne extends l{constructor(){super(...arguments);a(this,"priority",90);a(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,t,o){const i=c=>{const y=Math.floor((c-1)/7)*7;return(c+o.weekStartsOn+6)%7+y};switch(r){case"e":case"ee":return p(f(r.length,e),i);case"eo":return p(t.ordinalNumber(e,{unit:"day"}),i);case"eee":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeeee":return t.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,t,o){return e=N(e,t,o),e.setHours(0,0,0,0),e}}class Qe extends l{constructor(){super(...arguments);a(this,"priority",90);a(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,t,o){const i=c=>{const y=Math.floor((c-1)/7)*7;return(c+o.weekStartsOn+6)%7+y};switch(r){case"c":case"cc":return p(f(r.length,e),i);case"co":return p(t.ordinalNumber(e,{unit:"day"}),i);case"ccc":return t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"ccccc":return t.day(e,{width:"narrow",context:"standalone"});case"cccccc":return t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return t.day(e,{width:"wide",context:"standalone"})||t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,t,o){return e=N(e,t,o),e.setHours(0,0,0,0),e}}function Re(s,n){const e=P(s),r=we(e),t=n-r;return K(e,t)}class We extends l{constructor(){super(...arguments);a(this,"priority",90);a(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,t){const o=i=>i===0?7:i;switch(r){case"i":case"ii":return f(r.length,e);case"io":return t.ordinalNumber(e,{unit:"day"});case"iii":return p(t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),o);case"iiiii":return p(t.day(e,{width:"narrow",context:"formatting"}),o);case"iiiiii":return p(t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),o);case"iiii":default:return p(t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"}),o)}}validate(e,r){return r>=1&&r<=7}set(e,r,t){return e=Re(e,t),e.setHours(0,0,0,0),e}}class Ce extends l{constructor(){super(...arguments);a(this,"priority",80);a(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,t){switch(r){case"a":case"aa":case"aaa":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,t){return e.setHours(v(t),0,0,0),e}}class Be extends l{constructor(){super(...arguments);a(this,"priority",80);a(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,t){switch(r){case"b":case"bb":case"bbb":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,t){return e.setHours(v(t),0,0,0),e}}class Ge extends l{constructor(){super(...arguments);a(this,"priority",80);a(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,t){switch(r){case"B":case"BB":case"BBB":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,t){return e.setHours(v(t),0,0,0),e}}class Ae extends l{constructor(){super(...arguments);a(this,"priority",70);a(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,t){switch(r){case"h":return d(h.hour12h,e);case"ho":return t.ordinalNumber(e,{unit:"hour"});default:return f(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,t){const o=e.getHours()>=12;return o&&t<12?e.setHours(t+12,0,0,0):!o&&t===12?e.setHours(0,0,0,0):e.setHours(t,0,0,0),e}}class Xe extends l{constructor(){super(...arguments);a(this,"priority",70);a(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,t){switch(r){case"H":return d(h.hour23h,e);case"Ho":return t.ordinalNumber(e,{unit:"hour"});default:return f(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,t){return e.setHours(t,0,0,0),e}}class Fe extends l{constructor(){super(...arguments);a(this,"priority",70);a(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,t){switch(r){case"K":return d(h.hour11h,e);case"Ko":return t.ordinalNumber(e,{unit:"hour"});default:return f(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,t){return e.getHours()>=12&&t<12?e.setHours(t+12,0,0,0):e.setHours(t,0,0,0),e}}class ze extends l{constructor(){super(...arguments);a(this,"priority",70);a(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,t){switch(r){case"k":return d(h.hour24h,e);case"ko":return t.ordinalNumber(e,{unit:"hour"});default:return f(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,t){const o=t<=24?t%24:t;return e.setHours(o,0,0,0),e}}class Ze extends l{constructor(){super(...arguments);a(this,"priority",60);a(this,"incompatibleTokens",["t","T"])}parse(e,r,t){switch(r){case"m":return d(h.minute,e);case"mo":return t.ordinalNumber(e,{unit:"minute"});default:return f(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,t){return e.setMinutes(t,0,0),e}}class $e extends l{constructor(){super(...arguments);a(this,"priority",50);a(this,"incompatibleTokens",["t","T"])}parse(e,r,t){switch(r){case"s":return d(h.second,e);case"so":return t.ordinalNumber(e,{unit:"second"});default:return f(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,t){return e.setSeconds(t,0),e}}class Ke extends l{constructor(){super(...arguments);a(this,"priority",30);a(this,"incompatibleTokens",["t","T"])}parse(e,r){const t=o=>Math.trunc(o*Math.pow(10,-r.length+3));return p(f(r.length,e),t)}set(e,r,t){return e.setMilliseconds(t),e}}class Ve extends l{constructor(){super(...arguments);a(this,"priority",10);a(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return D(_.basicOptionalMinutes,e);case"XX":return D(_.basic,e);case"XXXX":return D(_.basicOptionalSeconds,e);case"XXXXX":return D(_.extendedOptionalSeconds,e);case"XXX":default:return D(_.extended,e)}}set(e,r,t){return r.timestampIsSet?e:m(e,e.getTime()-$(e)-t)}}class je extends l{constructor(){super(...arguments);a(this,"priority",10);a(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return D(_.basicOptionalMinutes,e);case"xx":return D(_.basic,e);case"xxxx":return D(_.basicOptionalSeconds,e);case"xxxxx":return D(_.extendedOptionalSeconds,e);case"xxx":default:return D(_.extended,e)}}set(e,r,t){return r.timestampIsSet?e:m(e,e.getTime()-$(e)-t)}}class Ue extends l{constructor(){super(...arguments);a(this,"priority",40);a(this,"incompatibleTokens","*")}parse(e){return j(e)}set(e,r,t){return[m(e,t*1e3),{timestampIsSet:!0}]}}class Je extends l{constructor(){super(...arguments);a(this,"priority",20);a(this,"incompatibleTokens","*")}parse(e){return j(e)}set(e,r,t){return[m(e,t),{timestampIsSet:!0}]}}const Se={G:new me,y:new be,Y:new xe,R:new ge,u:new Te,Q:new _e,q:new De,M:new ke,L:new Ee,w:new Me,I:new Ye,d:new Le,D:new qe,E:new ve,e:new Ne,c:new Qe,i:new We,a:new Ce,b:new Be,B:new Ge,h:new Ae,H:new Xe,K:new Fe,k:new ze,m:new Ze,s:new $e,S:new Ke,X:new Ve,x:new je,t:new Ue,T:new Je},et=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rt=/^'([^]*?)'?$/,st=/''/g,nt=/\S/,ot=/[a-zA-Z]/;function at(s,n,e,r){var Q,R,W,C;const t=de(),o=t.locale??le,i=t.firstWeekContainsDate??((R=(Q=t.locale)==null?void 0:Q.options)==null?void 0:R.firstWeekContainsDate)??1,c=t.weekStartsOn??((C=(W=t.locale)==null?void 0:W.options)==null?void 0:C.weekStartsOn)??0,y={firstWeekContainsDate:i,weekStartsOn:c,locale:o},x=[new ye],I=n.match(tt).map(u=>{const w=u[0];if(w in X){const T=X[w];return T(u,o.formatLong)}return u}).join("").match(et),g=[];for(let u of I){oe(u)&&F(u,n,s),ae(u)&&F(u,n,s);const w=u[0],T=Se[w];if(T){const{incompatibleTokens:B}=T;if(Array.isArray(B)){const G=g.find(A=>B.includes(A.token)||A.token===w);if(G)throw new RangeError(`The format string mustn't contain \`${G.fullToken}\` and \`${u}\` at the same time`)}else if(T.incompatibleTokens==="*"&&g.length>0)throw new RangeError(`The format string mustn't contain \`${u}\` and any other token at the same time`);g.push({token:w,fullToken:u});const L=T.run(s,u,o.match,y);if(!L)return m(e,NaN);x.push(L.setter),s=L.rest}else{if(w.match(ot))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");if(u==="''"?u="'":w==="'"&&(u=it(u)),s.indexOf(u)===0)s=s.slice(u.length);else return m(e,NaN)}}if(s.length>0&&nt.test(s))return m(e,NaN);const k=x.map(u=>u.priority).sort((u,w)=>w-u).filter((u,w,T)=>T.indexOf(u)===w).map(u=>x.filter(w=>w.priority===u).sort((w,T)=>T.subPriority-w.subPriority)).map(u=>u[0]);let b=P(e);if(isNaN(b.getTime()))return m(e,NaN);const Y={};for(const u of k){if(!u.validate(b,y))return m(e,NaN);const w=u.set(b,Y,y);Array.isArray(w)?(b=w[0],Object.assign(Y,w[1])):b=w}return m(e,b)}function it(s){return s.match(rt)[1].replace(st,"'")}const wt=te((s,n)=>({events:[],isLoading:!1,error:null,fetchEvents:async()=>{s({isLoading:!0,error:null});try{const{data:e,error:r}=await M.from("eventos").select("*").order("fecha_inicio",{ascending:!0});if(r)throw r;const t=e.map(o=>({id:o.id,title:o.titulo,description:o.descripcion||"",type:o.tipo,date:o.fecha_inicio,time:H(new Date(o.fecha_inicio),"HH:mm"),location:o.ubicacion,userId:o.creador_id,createdAt:o.creado_en,imagen_url:o.imagen_url,metadata:o.metadata||{}}));s({events:t,isLoading:!1})}catch(e){s({error:e instanceof Error?e.message:"Error al cargar eventos",isLoading:!1})}},addEvent:async e=>{s({isLoading:!0,error:null});try{const r=new Date(e.date);if(e.time){const[g,k]=e.time.split(":");r.setHours(parseInt(g),parseInt(k))}const{metadata:t,...o}=e,i={titulo:o.title,descripcion:o.description,tipo:o.type,fecha_inicio:r.toISOString(),ubicacion:o.location,creador_id:o.userId,estado:"publicado",...t&&{metadata:t}};let c;const{data:y,error:x}=await M.from("eventos").insert(i).select().single();if(x)if(x.message.includes("metadata")){const{metadata:g,...k}=i,b=await M.from("eventos").insert(k).select().single();if(b.error)throw b.error;c=b.data}else throw x;else c=y;const I={id:c.id,title:c.titulo,description:c.descripcion||"",type:c.tipo,date:c.fecha_inicio,time:e.time,location:c.ubicacion,userId:c.creador_id,createdAt:c.creado_en,imagen_url:c.imagen_url,metadata:c.metadata||{}};s(g=>({events:[...g.events,I],isLoading:!1})),E.success("¡Evento creado exitosamente!")}catch(r){s({error:r instanceof Error?r.message:"Error al crear evento",isLoading:!1}),E.error(`Error al crear evento: ${r instanceof Error?r.message:"Error desconocido"}`)}},updateEvent:async(e,r)=>{s({isLoading:!0,error:null});try{const t={};if(r.title&&(t.titulo=r.title),r.description&&(t.descripcion=r.description),r.type&&(t.tipo=r.type),r.date){const i=new Date(r.date);if(r.time){const[c,y]=r.time.split(":");i.setHours(parseInt(c),parseInt(y))}t.fecha_inicio=i.toISOString()}r.location&&(t.ubicacion=r.location);const{error:o}=await M.from("eventos").update(t).eq("id",e);if(o)throw o;s(i=>({events:i.events.map(c=>c.id===e?{...c,...r}:c),isLoading:!1})),E.success("¡Evento actualizado exitosamente!")}catch(t){s({error:t instanceof Error?t.message:"Error al actualizar evento",isLoading:!1}),E.error("Error al actualizar evento")}},deleteEvent:async e=>{s({isLoading:!0,error:null});try{const{error:r}=await M.from("eventos").delete().eq("id",e);if(r)throw r;s(t=>({events:t.events.filter(o=>o.id!==e),isLoading:!1})),E.success("¡Evento eliminado exitosamente!")}catch(r){s({error:r instanceof Error?r.message:"Error al eliminar evento",isLoading:!1}),E.error("Error al eliminar evento")}},getEventsByDate:e=>{const r=H(e,"yyyy-MM-dd");return n().events.filter(t=>H(new Date(t.date),"yyyy-MM-dd")===r)},addComment:async(e,r,t)=>{try{const{data:o,error:i}=await M.from("comentarios_evento").insert({evento_id:e,autor_id:r,contenido:t}).select().single();if(i)throw i;return E.success("Comentario agregado"),o}catch{return E.error("Error al agregar comentario"),null}}})),ft=s=>{if(!s)return"";try{const n=at(s,"HH:mm",new Date);return H(n,"h:mm a")}catch{return s}};export{ft as f,wt as u};
